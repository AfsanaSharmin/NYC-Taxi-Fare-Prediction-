# -*- coding: utf-8 -*-
"""ML_Project.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1HJs2cIcHKN1MYqgH5uHUDsS9an7yGs1u
"""

# Re-import libraries after code execution state reset
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt
from google.colab import drive

# ---- 1. Mount Google Drive ----
drive.mount('/content/drive')

# ---- 2. Load Dataset ----
#train_path = "/content/drive/My Drive/Dataset/Train_set.csv"

# Reload the Excel file
file_path = "/content/drive/My Drive/Dataset/Taxi_Fare_Dataset.xlsx"
df = pd.read_excel(file_path, sheet_name="Sheet1")

# Compute correlation matrix for relevant columns
correlation_matrix = df[['trip_distance', 'trip_duration','day_of_week','hour_of_day', 'pickup_location_id','dropoff_location_id','fare_amount']].corr()

# Plot correlation heatmap
plt.figure(figsize=(8, 5))
sns.heatmap(correlation_matrix, annot=True, cmap='coolwarm', fmt=".2f")
plt.title("Correlation Matrix: trip_distance, trip_duration,pickup_location_id,dropoff_location_id,day_of_week,hour_of_day, fare_amount")
plt.show()


num_cols = ['trip_distance', 'trip_duration', 'fare_amount']
for col in num_cols:
    plt.figure(figsize=(6, 4))
    sns.histplot(df[col], kde=True)
    plt.title(f'Distribution of {col}')
    plt.show()
#hypothesis
# H1: Trip Distance vs Fare Amount
plt.figure(figsize=(8, 5))
sns.scatterplot(data=df, x='trip_distance', y='fare_amount', alpha=0.5)
plt.title("H1: Trip Distance vs Fare Amount")
plt.xlabel("Trip Distance")
plt.ylabel("Fare Amount")
plt.grid(True)
plt.show()

# H2: Trip Duration vs Fare Amount
plt.figure(figsize=(8, 5))
sns.scatterplot(data=df, x='trip_duration', y='fare_amount', alpha=0.5)
plt.title("H2: Trip Duration vs Fare Amount")
plt.xlabel("Trip Duration (seconds)")
plt.ylabel("Fare Amount")
plt.grid(True)
plt.show()
# H3.1: Boxplot - Fare Amount by Day of Week
plt.figure(figsize=(8, 5))
sns.boxplot(data=df, x='day_of_week', y='fare_amount')
plt.title("H3.1: Fare Amount by Day of Week")
plt.xlabel("Day of Week (1 = Monday, 7 = Sunday)")
plt.ylabel("Fare Amount")
plt.show()

# H3.2: Line Plot - Average Fare Amount by Hour of Day
plt.figure(figsize=(8, 5))
sns.lineplot(data=df.groupby('hour_of_day')['fare_amount'].mean().reset_index(),
             x='hour_of_day', y='fare_amount', marker='o')
plt.title("H3.2: Average Fare Amount by Hour of Day")
plt.xlabel("Hour of Day")
plt.ylabel("Average Fare Amount")
plt.xticks(range(0, 24))
plt.show()